
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>vagrant-tutorial - Eesseak</title>
	<meta name="author" content="esseak">

	
	<meta name="description" content="Vagrant-tutorial Vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。我们用vagrant可以统一开发人员的开发环境，而不必每个人员每台开发机上都从头搭建开发环境。想必每个人遇到需要统一开发环境的需求，比如数据库版本，PHP版本，Ruby版本。 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Eesseak" type="application/atom+xml">
	
	<link rel="canonical" href="http://esseak.github.io/blog/2014/12/30/vagrant-tutorial/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-54776374-3']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("esseak@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>
stay hungry stay foolish
<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/about-me">About</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:esseak@gmail.com" title="Email">Email</a>
		
		
		
		
		
			<a class="github" href="https://github.com/esseak" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Vagrant-tutorial</h1>
	<div class="entry-content" itemprop="articleBody"><p>Vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。我们用vagrant可以统一开发人员的开发环境，而不必每个人员每台开发机上都从头搭建开发环境。想必每个人遇到需要统一开发环境的需求，比如数据库版本，PHP版本，Ruby版本。项目大一些的可能会用到其他辅助的方案比如：Solr，redis等。如果使用Vagrant你可以几步把这些都安装好。</p>

<h3>Vagrant配置</h3>

<ol>
<li><p>Vagrant基于虚拟机，所以下载VirtualBox并且安装。</p>

<p> <code>http://download.virtualbox.org/virtualbox/4.3.20/VirtualBox-4.3.20-96996-OSX.dmg</code></p></li>
<li><p>建立工作目录，如works</p>

<p> <code>mkdir works</code></p></li>
<li><p>进入/works ，并且通过一个box文件添加一个box</p>

<p> <code>cd works</code></p>

<p> <code>vagrant box add workstation [package.box_path]</code></p></li>
<li><p>初始化vm</p>

<p> <code>vagrant init workstation</code></p>

<p> 这时候会发现文件夹里生成了一个Vagrantfile，这里是对workstation虚拟机的设置。里面设置比较重要的有</p>

<p> <code>config.vm.network "private_network", ip: "192.168.33.10"</code></p>

<p> 设置vagrant中虚拟机映射ip为192.168.33.10，</p>

<p> <code>config.vm.synced_folder "./root", "/vagrant", :type =&gt; 'nfs'</code></p>

<p> 设置vagrant中虚拟机和外部系统的共享文件，mac党要打开nfs选项有助于性能的提升，win党不需要。</p></li>
<li><p>启动vagrant</p>

<p> <code>vagrant up</code></p>

<p> 启动中因为使用了nfs中途需要输入root密码，对vagrant常用操作还有下面几个</p>

<ul>
<li>vagrant up （启动 vagrant中虚拟主机）</li>
<li>vagrant reload （重启 vagrant中虚拟主机）</li>
<li>vagrant halt （关闭 vagrant中虚拟主机）</li>
<li>vagrant suspend （暂停 vagrant中虚拟主机）</li>
<li>vagrant resume （恢复 vagrant中虚拟主机）</li>
<li>vagrant destroy（删除 vagrant中虚拟主机）</li>
</ul>


<p> 如果顺利vagrant正常启动后就可以开工了，使用</p>

<p> <code>vagrant ssh</code></p>

<p> 登录到vagrant中虚拟机，win使用PuTTY登录vagrant虚拟机。账户：root 密码：vagrant</p>

<p> 现在可以在vagrant中配置和搭建开发环境了，代码尽量放在设置的共享目录里，方便在主机系统中编辑。</p></li>
</ol>


<h3>打包Box</h3>

<ol>
<li><p>如果是private_network网络配置需要在虚拟机种删除网络配置</p>

<p> <code>sudo rm /etc/udev/rules.d/70-persistent-net.rules</code></p></li>
<li><p>打包Box</p>

<p> <code>vagrant package --output workstation_box.box</code></p>

<p> 现在你可以分发到大伙手里了</p></li>
</ol>

</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    esseak


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	










</body>
</html>
